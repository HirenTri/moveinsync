# MoveInSync: Complete System Overview Infographic

## ğŸ—ï¸ System Architecture Overview

### Layered Architecture Diagram

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         PRESENTATION LAYER                    â”ƒ
â”ƒ                      (React Frontend - Port 3000)             â”ƒ
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ                                                               â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”ƒ
â”ƒ  â”‚   Login &   â”‚  â”‚ Dashboards   â”‚  â”‚  Management      â”‚    â”ƒ
â”ƒ  â”‚  Register   â”‚  â”‚              â”‚  â”‚  Pages           â”‚    â”ƒ
â”ƒ  â”‚   Pages     â”‚  â”‚ - Super      â”‚  â”‚                  â”‚    â”ƒ
â”ƒ  â”‚             â”‚  â”‚ - Regional   â”‚  â”‚ - Users          â”‚    â”ƒ
â”ƒ  â”‚             â”‚  â”‚ - Driver     â”‚  â”‚ - Vehicles       â”‚    â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Drivers        â”‚    â”ƒ
â”ƒ                                      â”‚ - Permissions    â”‚    â”ƒ
â”ƒ                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”ƒ
â”ƒ                                                               â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ  â”‚         AuthContext (Token + User State)              â”‚  â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                   â”‚                                          â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ  â”‚    Axios HTTP Client (Auto JWT Injection)            â”‚  â”ƒ
â”ƒ  â”‚  Base URL: http://localhost:5005/api                 â”‚  â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                   â”‚                                          â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                    â”‚ HTTP/REST (CORS Enabled)
                    â”‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                   â–¼         APPLICATION LAYER              â”ƒ
â”ƒ              (Express.js - Port 5005)                      â”ƒ
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ                                                            â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ  â”‚  JWT Authentication & Authorization Middleware    â”‚  â”ƒ
â”ƒ  â”‚  - Verify token signature                         â”‚  â”ƒ
â”ƒ  â”‚  - Extract userId & role                          â”‚  â”ƒ
â”ƒ  â”‚  - Fetch user from DB                             â”‚  â”ƒ
â”ƒ  â”‚  - Set req.user for routes                        â”‚  â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                   â”‚                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚          ROUTE HANDLERS / CONTROLLERS              â”‚ â”ƒ
â”ƒ  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”ƒ
â”ƒ  â”‚                                                    â”‚ â”ƒ
â”ƒ  â”‚  /api/auth          â†’ Authentication (5 routes)   â”‚ â”ƒ
â”ƒ  â”‚  /api/users         â†’ User Management (2 routes)  â”‚ â”ƒ
â”ƒ  â”‚  /api/vehicles      â†’ Vehicle Fleet (8 routes)    â”‚ â”ƒ
â”ƒ  â”‚  /api/driver-docs   â†’ License Handling (3 routes) â”‚ â”ƒ
â”ƒ  â”‚  /api/region        â†’ Regional Stats (1 route)    â”‚ â”ƒ
â”ƒ  â”‚  /api/stats         â†’ Platform Stats (1 route)    â”‚ â”ƒ
â”ƒ  â”‚  /api/permissions   â†’ Permission Mgmt (routes)    â”‚ â”ƒ
â”ƒ  â”‚  /api/admin         â†’ Admin Functions (routes)    â”‚ â”ƒ
â”ƒ  â”‚                                                    â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                   â”‚                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚  Business Logic & Data Validation                  â”‚ â”ƒ
â”ƒ  â”‚  - Input validation                                â”‚ â”ƒ
â”ƒ  â”‚  - Authorization checks                            â”‚ â”ƒ
â”ƒ  â”‚  - Business rule enforcement                       â”‚ â”ƒ
â”ƒ  â”‚  - Cache management                                â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                   â”‚                                       â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
â”â”â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”“    â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ   DATA LAYER    â”ƒ    â”ƒ  CACHE LAYER    â”ƒ
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«    â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ                â”ƒ    â”ƒ                 â”ƒ
â”ƒ  MongoDB Atlas â”ƒ    â”ƒ Upstash Redis   â”ƒ
â”ƒ                â”ƒ    â”ƒ                 â”ƒ
â”ƒ Collections:   â”ƒ    â”ƒ Key: users:all  â”ƒ
â”ƒ - users        â”ƒ    â”ƒ TTL: 5 minutes  â”ƒ
â”ƒ - vehicles     â”ƒ    â”ƒ                 â”ƒ
â”ƒ - driver_docs  â”ƒ    â”ƒ (Optional)      â”ƒ
â”ƒ - permissions  â”ƒ    â”ƒ                 â”ƒ
â”ƒ - etc.         â”ƒ    â”ƒ                 â”ƒ
â”ƒ                â”ƒ    â”ƒ                 â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## ğŸ‘¥ User Role Hierarchy

```
                         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â”ƒ   SUPER VENDOR      â”ƒ
                         â”ƒ  (Platform Admin)   â”ƒ
                         â”ƒ                     â”ƒ
                         â”ƒ Permissions:        â”ƒ
                         â”ƒ â€¢ View all users    â”ƒ
                         â”ƒ â€¢ Manage all roles  â”ƒ
                         â”ƒ â€¢ Assign perms      â”ƒ
                         â”ƒ â€¢ System admin      â”ƒ
                         â”—â”â”â”â”â”â”¬â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
        â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”“ â”â”â”â”â”â”â–¼â”â”â”â”â”â”“ â”â”â”â”â”â–¼â”â”â”â”â”“
        â”ƒ  REGIONAL  â”ƒ â”ƒ    CITY   â”ƒ â”ƒ  LOCAL   â”ƒ
        â”ƒ  VENDOR    â”ƒ â”ƒ   VENDOR  â”ƒ â”ƒ  VENDOR  â”ƒ
        â”ƒ(Branch Mgr)â”ƒ â”ƒ           â”ƒ â”ƒ          â”ƒ
        â”ƒ            â”ƒ â”ƒ           â”ƒ â”ƒ          â”ƒ
        â”ƒ Permissions:        Permissions:      Permissions:
        â”ƒ â€¢ Manage drivers    â€¢ Limited users   â€¢ View only
        â”ƒ â€¢ Manage vehicles   â€¢ Manage zone     â€¢ Report only
        â”ƒ â€¢ Assign drivers    â€¢ Some perms      â€¢ No admin
        â”ƒ â€¢ View licenses     â€¢ Zone specific   â€¢ Limited access
        â”—â”â”â”â”â”â”¬â”€â”€â”€â”€â”€â”€â”€â”› â”—â”â”â”â”â”â”¬â”â”â”â”â”â”› â”—â”â”â”â”â”¬â”â”â”â”â”â”›
              â”‚               â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
            â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”ƒ      DRIVERS      â”ƒ
            â”ƒ   (Fleet Staff)   â”ƒ
            â”ƒ                   â”ƒ
            â”ƒ Permissions:      â”ƒ
            â”ƒ â€¢ View profile    â”ƒ
            â”ƒ â€¢ Upload license  â”ƒ
            â”ƒ â€¢ View assignment â”ƒ
            â”ƒ â€¢ Accept jobs     â”ƒ
            â”—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Authentication Flow

```
User Input                 Backend                      Storage
â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€

   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ REGISTER/LOGIN                                       â”‚
   â”‚ â€¢ email                                              â”‚
   â”‚ â€¢ password                                           â”‚
   â”‚ â€¢ role (register only)                               â”‚
   â”‚                                                      â”‚
   â–¼                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚ Validation  â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚
â”‚ â€¢ Email ok? â”‚                                          â”‚
â”‚ â€¢ Pass ok?  â”‚â”€â”€â”€â”€â”€â”                                    â”‚
â”‚ â€¢ Role ok?  â”‚     â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                    â”‚
   â”‚                â”‚                                    â”‚
   â”‚ âœ“            â”‚ âœ— Error                             â”‚
   â”‚              â”‚ (400/401)                           â”‚
   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚
   â”‚                                                      â”‚
   â–¼                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚ Hash Password       â”‚                                  â”‚
â”‚ (bcrypt 10 rounds)  â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
           â”‚                                             â”‚
           â–¼                                             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
      â”‚ Save User to MongoDB                â”‚           â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
      â”‚ Create: {                           â”‚           â”‚
      â”‚   email: "...",                     â”‚           â”‚
      â”‚   passwordHash: "bcrypt...",        â”‚           â”‚
      â”‚   firstName, lastName,              â”‚           â”‚
      â”‚   role, region, customPermissions   â”‚           â”‚
      â”‚ }                                   â”‚           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                 â”‚                                       â”‚
                 â–¼                                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
            â”‚ Create JWT Token         â”‚               â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
            â”‚ Payload: {               â”‚               â”‚
            â”‚   userId: "...",         â”‚               â”‚
            â”‚   role: "...",           â”‚               â”‚
            â”‚   iat: now,              â”‚               â”‚
            â”‚   exp: now + 8 hours     â”‚               â”‚
            â”‚ }                        â”‚               â”‚
            â”‚ Sign: JWT_SECRET         â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                       â”‚                                â”‚
                       â–¼                                â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
                  â”‚ Response: {      â”‚               â”‚
                  â”‚   token: "jwt"   â”‚               â”‚
                  â”‚   role: "..."    â”‚               â”‚
                  â”‚ }                â”‚               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                             â”‚                        â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
                                                       â”‚
                                                   localStorage
                                                   setItem('token')
                                                   setItem('role')
                                                       â”‚
                                                       â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚AuthContext   â”‚
                                                  â”‚update state  â”‚
                                                  â”‚  setToken()  â”‚
                                                  â”‚  setRole()   â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚ Redirect to    â”‚
                                                  â”‚ role dashboard â”‚
                                                  â”‚ /super/...     â”‚
                                                  â”‚ /regional/...  â”‚
                                                  â”‚ /driver/...    â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Vehicle Assignment Workflow

```
                     Regional Vendor Dashboard
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Click "Assign Driver"â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Open Modal/Form    â”‚
                    â”‚                    â”‚
                    â”‚ Select Vehicle â–¼   â”‚
                    â”‚ Select Driver  â–¼   â”‚
                    â”‚                    â”‚
                    â”‚ [Cancel] [Assign]  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Frontend Validation               â”‚
                        â”‚ âœ“ Vehicle selected?               â”‚
                        â”‚ âœ“ Driver selected?                â”‚
                        â”‚ âœ“ Different entities?             â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ POST /api/vehicles/:id/        â”‚
                    â”‚       assign-driver            â”‚
                    â”‚                                â”‚
                    â”‚ Body: {                        â”‚
                    â”‚   driverId: "..."              â”‚
                    â”‚ }                              â”‚
                    â”‚ Headers:                       â”‚
                    â”‚ Auth: "Bearer {token}"         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           BACKEND PROCESSING                           â”‚
        â”‚                                                        â”‚
        â”‚ 1. Auth Middleware                                     â”‚
        â”‚    â””â”€ Verify JWT & set req.user                        â”‚
        â”‚                                                        â”‚
        â”‚ 2. Validation                                          â”‚
        â”‚    â””â”€ driverId provided?                               â”‚
        â”‚    â””â”€ Vehicle exists?                                  â”‚
        â”‚    â””â”€ Driver exists?                                   â”‚
        â”‚                                                        â”‚
        â”‚ 3. License Check                                       â”‚
        â”‚    â””â”€ DriverDoc.findOne({ userId: driverId })        â”‚
        â”‚    â””â”€ If NOT found â†’ Error 400: "No license"          â”‚
        â”‚    â””â”€ If found â†’ Continue                             â”‚
        â”‚                                                        â”‚
        â”‚ 4. Update Vehicle                                      â”‚
        â”‚    â”œâ”€ vehicle.assigned = true                          â”‚
        â”‚    â””â”€ vehicle.driverId = driverId                      â”‚
        â”‚       Save to DB âœ“                                     â”‚
        â”‚                                                        â”‚
        â”‚ 5. Update DriverDoc                                    â”‚
        â”‚    â””â”€ doc.vehicleId = vehicleId                        â”‚
        â”‚       Save to DB âœ“                                     â”‚
        â”‚                                                        â”‚
        â”‚ 6. Response: 200 OK                                    â”‚
        â”‚    Updated vehicle object                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Frontend Response Handler â”‚
          â”‚                          â”‚
          â”‚ âœ“ Success               â”‚
          â”‚   - Show green notification
          â”‚   - Update vehicle list  â”‚
          â”‚   - Mark as "assigned"   â”‚
          â”‚   - Refresh data         â”‚
          â”‚                          â”‚
          â”‚ âœ— Error                 â”‚
          â”‚   - Show error message   â”‚
          â”‚   - Display details      â”‚
          â”‚   - Keep form open       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Assignment Complete  â”‚
            â”‚                      â”‚
            â”‚ Vehicle:             â”‚
            â”‚ ABC123 assigned to   â”‚
            â”‚ Driver: John Doe     â”‚
            â”‚                      â”‚
            â”‚ Status: Active âœ“     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Data Model Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       USER           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id                  â”‚
â”‚ email (unique)       â”‚
â”‚ passwordHash         â”‚
â”‚ firstName, lastName  â”‚
â”‚ role: Enum           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ region: String       â”‚                      â”‚
â”‚ customPermissions[]  â”‚                      â”‚
â”‚ vendorId? (ref)      â”‚                      â”‚
â”‚ createdAt            â”‚                      â”‚
â”‚ updatedAt            â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
         â”‚                                    â”‚
         â”‚                    Referenced by   â”‚
         â”‚ createdBy          (one-to-many)   â”‚
         â”‚                                    â”‚
         â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚      VEHICLE         â”‚   â”‚
         â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
         â”‚        â”‚ _id                  â”‚   â”‚
         â”‚        â”‚ registrationNumber   â”‚   â”‚
         â”‚        â”‚   (unique)           â”‚   â”‚
         â”‚        â”‚ model                â”‚   â”‚
         â”‚        â”‚ seatingCapacity      â”‚   â”‚
         â”‚        â”‚ fuelType: Enum       â”‚   â”‚
         â”‚        â”‚ region: String       â”‚   â”‚
         â”‚        â”‚ rcFile: String       â”‚   â”‚
         â”‚        â”‚ permitFile: String   â”‚   â”‚
         â”‚        â”‚ pollutionFile: Stringâ”‚   â”‚
         â”‚        â”‚ assigned: Boolean    â”‚   â”‚
         â”‚        â”‚ driverId? (ref) â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜
         â”‚        â”‚ createdBy (ref) â”€â”€â”€â”€â”€â”˜
         â”‚        â”‚ createdAt            â”‚
         â”‚        â”‚ updatedAt            â”‚
         â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â–²
         â”‚                 â”‚ assigned to
         â”‚                 â”‚ (one-to-many)
         â”‚                 â”‚
         â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        â”‚ DRIVER DOCUMENT        â”‚
         â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚        â”‚ _id                    â”‚
         â”‚        â”‚ userId (unique, ref)â”€â”€â”€â”˜
         â”‚        â”‚ docType: 'license'     â”‚
         â”‚        â”‚ filePath: String       â”‚
         â”‚        â”‚ uploadedAt: Date       â”‚
         â”‚        â”‚ vehicleId? (ref)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚                                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Relationships] â”€â”€â”€â”€â”˜

One USER can have:
  - Multiple VEHICLES (as createdBy)
  - One DRIVER DOCUMENT (as userId, unique)

One VEHICLE:
  - belongs to one DRIVER (driverId) or null
  - created by one USER

One DRIVER DOCUMENT:
  - belongs to one DRIVER/USER (userId)
  - references one VEHICLE (vehicleId) or null
```

---

## ğŸŒ API Endpoint Categories

### Authentication (5 endpoints)
```
POST   /api/auth/register              Register new user
POST   /api/auth/login                 Login user
GET    /api/auth/me                    Get current user
PATCH  /api/auth/me                    Update user profile
GET    /api/auth/me/permissions        Get user permissions
```

### Users (2 endpoints)
```
GET    /api/users                      List all users
PATCH  /api/users/:userId/permissions  Update permissions
```

### Vehicles (8 endpoints)
```
POST   /api/vehicles                   Create vehicle
GET    /api/vehicles                   List region vehicles
GET    /api/vehicles/all               List all vehicles
GET    /api/vehicles/my-assigned       Driver's vehicles
PATCH  /api/vehicles/:id/assign-driver Assign driver
PATCH  /api/vehicles/:id/unassign-driver Unassign driver
DELETE /api/vehicles/:id               Delete vehicle
```

### Driver Documents (3 endpoints)
```
POST   /api/driver-docs                Upload license
GET    /api/driver-docs                Get my license
GET    /api/driver-docs/region         List regional drivers
```

### Region & Stats (2 endpoints)
```
GET    /api/region/dashboard           Regional metrics
GET    /api/stats/super                Platform metrics
```

---

## ğŸ”’ Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLIENT LAYER                       â”‚
â”‚  â€¢ HTTPS only (production)                      â”‚
â”‚  â€¢ No sensitive data in localStorage            â”‚
â”‚  â€¢ CORS origin validation                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TRANSPORT LAYER                         â”‚
â”‚  â€¢ TLS/SSL certificates                         â”‚
â”‚  â€¢ CORS headers validation                      â”‚
â”‚  â€¢ HTTPS enforcement                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      APPLICATION LAYER                          â”‚
â”‚  â€¢ JWT token verification                       â”‚
â”‚  â€¢ Role-based access control                    â”‚
â”‚  â€¢ Rate limiting (recommended)                  â”‚
â”‚  â€¢ Input validation & sanitization              â”‚
â”‚  â€¢ Authorization middleware                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DATA LAYER                              â”‚
â”‚  â€¢ Password hashing (bcrypt)                    â”‚
â”‚  â€¢ Unique constraints on email                  â”‚
â”‚  â€¢ Database access control                      â”‚
â”‚  â€¢ Encryption at rest (MongoDB)                 â”‚
â”‚  â€¢ Regular backups                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Request/Response Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLIENT (Browser)                       â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. React Component                                â”‚  â”‚
â”‚  â”‚    const [data, setData] = useState(null)         â”‚  â”‚
â”‚  â”‚    useEffect(() => {                             â”‚  â”‚
â”‚  â”‚      api.get('/endpoint')                         â”‚  â”‚
â”‚  â”‚        .then(res => setData(res.data))            â”‚  â”‚
â”‚  â”‚    }, [])                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. Axios Interceptor                             â”‚  â”‚
â”‚  â”‚    - Get token from localStorage                 â”‚  â”‚
â”‚  â”‚    - Add Authorization header                    â”‚  â”‚
â”‚  â”‚    - Create HTTP request                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP Request
                    â”‚ GET /api/endpoint
                    â”‚ Headers: {
                    â”‚   Authorization: "Bearer eyJ..."
                    â”‚   Content-Type: "application/json"
                    â”‚ }
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SERVER (Express)                       â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. CORS Middleware                             â”‚   â”‚
â”‚  â”‚    - Check origin                              â”‚   â”‚
â”‚  â”‚    - Validate headers                          â”‚   â”‚
â”‚  â”‚    - Allow request                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4. Auth Middleware                             â”‚   â”‚
â”‚  â”‚    - Extract JWT from header                   â”‚   â”‚
â”‚  â”‚    - Verify signature                          â”‚   â”‚
â”‚  â”‚    - Decode payload                            â”‚   â”‚
â”‚  â”‚    - Fetch user from DB                        â”‚   â”‚
â”‚  â”‚    - Set req.user                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 5. Route Handler                               â”‚   â”‚
â”‚  â”‚    - Check role authorization                  â”‚   â”‚
â”‚  â”‚    - Validate inputs                           â”‚   â”‚
â”‚  â”‚    - Check cache first                         â”‚   â”‚
â”‚  â”‚    - Query database if miss                    â”‚   â”‚
â”‚  â”‚    - Update cache                              â”‚   â”‚
â”‚  â”‚    - Format response                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 6. HTTP Response                               â”‚   â”‚
â”‚  â”‚    Status: 200 OK                              â”‚   â”‚
â”‚  â”‚    Body: {                                     â”‚   â”‚
â”‚  â”‚      _id: "...",                               â”‚   â”‚
â”‚  â”‚      field1: "...",                            â”‚   â”‚
â”‚  â”‚      ...                                       â”‚   â”‚
â”‚  â”‚    }                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP Response (JSON)
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLIENT (Browser)                          â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 7. Response Handler                            â”‚   â”‚
â”‚  â”‚    - Parse JSON                                â”‚   â”‚
â”‚  â”‚    - Update React state                        â”‚   â”‚
â”‚  â”‚    - Re-render components                      â”‚   â”‚
â”‚  â”‚    - Display data to user                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Dashboard Data Loading Timeline

```
Time  â†’  0ms      100ms     200ms     300ms     400ms     500ms+
         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
User     â”œâ”€ Mounts component
Lands    â”‚  
on       â”‚  â”œâ”€ Show loading spinner
Dash     â”‚  â”‚
board    â”‚  â”œâ”€â”€â”€â”€â”€â–º GET /api/region/dashboard (request sent)
         â”‚  â”‚
         â”‚  â”‚       â”œâ”€ Server receives request
         â”‚  â”‚       â”œâ”€ authMw verifies JWT
         â”‚  â”‚       â”œâ”€ Parallel DB queries:
         â”‚  â”‚       â”‚  â€¢ User.count(drivers)
         â”‚  â”‚       â”‚  â€¢ Vehicle.count()
         â”‚  â”‚       â”‚  â€¢ Vehicle.distinct(driverId)
         â”‚  â”‚       â”‚  â€¢ Vehicle.count(assigned)
         â”‚  â”‚       â”‚  â€¢ User.findById(permissions)
         â”‚  â”‚       â”‚
         â”‚  â”‚       â”œâ”€ Calculate metrics:
         â”‚  â”‚       â”‚  â€¢ Dispatch Rate = assigned/total
         â”‚  â”‚       â”‚  â€¢ Utilization = drivers/total
         â”‚  â”‚       â”‚
         â”‚  â”‚       â”œâ”€ Format response
         â”‚  â”‚
         â”‚  â”‚â—„â”€â”€â”€â”€â”€â”€â”€ Response received (JSON)
         â”‚  â”‚
         â”‚  â”œâ”€ Parse response
         â”‚  â”œâ”€ Update state (setStats)
         â”‚  â”œâ”€ Hide loading spinner
         â”‚  â”‚
         â”‚  â””â”€ Render dashboard:
         â”‚     â€¢ Metric cards display
         â”‚     â€¢ Charts/graphs render
         â”‚     â€¢ Analytics visible
         â”‚
Display complete & interactive âœ“
```

---

## ğŸ“‹ Environment Variables Checklist

```
BACKEND (.env)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ MONGO_URI = "mongodb+srv://user:pass@cluster..."
  Purpose: MongoDB database connection string
  
âœ“ JWT_SECRET = "your_secure_random_string_here"
  Purpose: Secret key for signing JWT tokens
  Requirement: Strong, random, 32+ characters
  
âœ“ UPSTASH_REDIS_REST_URL = "https://instance.upstash.io"
  Purpose: Redis REST API endpoint
  Requirement: Full read/write permissions
  
âœ“ UPSTASH_REDIS_REST_TOKEN = "your_token_here"
  Purpose: Authentication for Redis
  Requirement: Token with set/get permissions
  
âœ“ PORT = "5005" (optional, defaults to 5005)
  Purpose: Server port
  

FRONTEND (.env)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ REACT_APP_API_URL = "http://localhost:5005/api"
  Purpose: Backend API base URL
  Note: Must match backend server address
```

---

## ğŸš€ Deployment Readiness Checklist

```
PRE-DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Database
  â–¡ MongoDB Atlas cluster created
  â–¡ IP whitelist configured
  â–¡ Backups enabled
  â–¡ Connection string verified

â–¡ Redis
  â–¡ Upstash instance created
  â–¡ Token has read/write permissions
  â–¡ Connection tested

â–¡ Environment Variables
  â–¡ All .env variables set
  â–¡ JWT_SECRET is strong & random
  â–¡ Database credentials correct
  â–¡ API URLs configured

â–¡ Code
  â–¡ All tests passing
  â–¡ No console.log statements left
  â–¡ Error handling complete
  â–¡ CORS configured for frontend domain

â–¡ Security
  â–¡ JWT expiration set (8 hours)
  â–¡ Password hashing working
  â–¡ Authorization checks in place
  â–¡ Rate limiting configured (recommended)

â–¡ Frontend Build
  â–¡ npm run build successful
  â–¡ .env.production configured
  â–¡ REACT_APP_API_URL set to production
  â–¡ No hardcoded localhost URLs


DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Backend
  â–¡ Deploy to hosting (Heroku, Railway, AWS, etc.)
  â–¡ Set environment variables on host
  â–¡ Verify server is running
  â–¡ Test API endpoints

â–¡ Frontend
  â–¡ Deploy to hosting (Vercel, Netlify, etc.)
  â–¡ Build artifacts optimized
  â–¡ Routes configured correctly
  â–¡ API calls pointing to backend


POST-DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Testing
  â–¡ Test user registration flow
  â–¡ Test login with JWT
  â–¡ Test file uploads
  â–¡ Test role-based access
  â–¡ Test all dashboard pages

â–¡ Monitoring
  â–¡ Error logs configured
  â–¡ Performance monitoring enabled
  â–¡ Database queries optimized
  â–¡ Cache hit rate monitored

â–¡ Backup & Recovery
  â–¡ Database backups automated
  â–¡ Recovery plan documented
  â–¡ Disaster recovery tested
```

---

**Complete System Overview**  
Created: November 11, 2024  
System: MoveInSync - Vendor & Driver Management Platform  
Status: âœ… Ready for Development & Deployment
